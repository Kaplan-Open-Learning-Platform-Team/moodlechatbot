{"version":3,"file":"chat.min.js","sources":["../src/chat.js"],"sourcesContent":["import Ajax from 'core/ajax';\nimport Notification from 'core/notification';\n\n/**\n * Initialize the chat functionality.\n */\nexport const init = () => {\n    const messages = document.getElementById('moodlechatbot-messages');\n    const input = document.getElementById('moodlechatbot-input');\n    const sendButton = document.getElementById('moodlechatbot-send');\n\n    /**\n     * Add a message to the chat display.\n     * @param {string} sender The sender of the message.\n     * @param {string} message The message content.\n     */\n    const addMessage = (sender, message) => {\n        const messageElement = document.createElement('p');\n        messageElement.innerHTML = `<strong>${sender}:</strong> ${message}`;\n        messages.appendChild(messageElement);\n        messages.scrollTop = messages.scrollHeight;\n    };\n\n    /**\n     * Send a message to the server and handle the response.\n     */\n    const sendMessage = () => {\n        const message = input.value.trim();\n        if (message) {\n            addMessage('You', message);\n            input.value = '';\n\n            Ajax.call([{\n                methodname: 'mod_moodlechatbot_send_message',\n                args: { message: message },\n                done: (response) => {\n                    if (response.status === 'success') {\n                        addMessage('Bot', response.message);\n                    } else {\n                        Notification.alert('Error', response.message);\n                    }\n                },\n                fail: Notification.exception\n            }]);\n        }\n    };\n\n    // Event listeners\n    sendButton.addEventListener('click', sendMessage);\n    input.addEventListener('keypress', (e) => {\n        if (e.key === 'Enter' && !e.shiftKey) {\n            e.preventDefault();\n            sendMessage();\n        }\n    });\n};\n"],"names":["messages","document","getElementById","input","sendButton","addMessage","sender","message","messageElement","createElement","innerHTML","appendChild","scrollTop","scrollHeight","sendMessage","value","trim","call","methodname","args","done","response","status","alert","fail","Notification","exception","addEventListener","e","key","shiftKey","preventDefault"],"mappings":"yXAMoB,WACVA,SAAWC,SAASC,eAAe,0BACnCC,MAAQF,SAASC,eAAe,uBAChCE,WAAaH,SAASC,eAAe,sBAOrCG,WAAa,CAACC,OAAQC,iBAClBC,eAAiBP,SAASQ,cAAc,KAC9CD,eAAeE,4BAAuBJ,6BAAoBC,SAC1DP,SAASW,YAAYH,gBACrBR,SAASY,UAAYZ,SAASa,cAM5BC,YAAc,WACVP,QAAUJ,MAAMY,MAAMC,OACxBT,UACAF,WAAW,MAAOE,SAClBJ,MAAMY,MAAQ,iBAETE,KAAK,CAAC,CACPC,WAAY,iCACZC,KAAM,CAAEZ,QAASA,SACjBa,KAAOC,WACqB,YAApBA,SAASC,OACTjB,WAAW,MAAOgB,SAASd,+BAEdgB,MAAM,QAASF,SAASd,UAG7CiB,KAAMC,sBAAaC,eAM/BtB,WAAWuB,iBAAiB,QAASb,aACrCX,MAAMwB,iBAAiB,YAAaC,IAClB,UAAVA,EAAEC,KAAoBD,EAAEE,WACxBF,EAAEG,iBACFjB"}