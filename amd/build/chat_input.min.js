define("mod_moodlechatbot/chat_input",["exports","core/ajax","core/notification"],(function(_exports,_ajax,_notification){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_ajax=_interopRequireDefault(_ajax),_notification=_interopRequireDefault(_notification);const Selectors_FORM="#mod_moodlechatbot_input_form_",Selectors_INPUT='[data-region="input"]',Selectors_SEND_BUTTON='[data-action="send"]',Selectors_CHATBOT_ID='input[name="chatbotid"]',Selectors_SESSKEY='input[name="sesskey"]';_exports.init=uniqueId=>{const form=document.querySelector(Selectors_FORM+uniqueId),input=form.querySelector(Selectors_INPUT),submitButton=form.querySelector(Selectors_SEND_BUTTON),sendMessage=()=>{const message=input.value.trim();if(!message)return;const chatbotId=form.querySelector(Selectors_CHATBOT_ID).value,sesskey=form.querySelector(Selectors_SESSKEY).value;_ajax.default.call([{methodname:"mod_moodlechatbot_send_message",args:{chatbotid:chatbotId,message:message,sesskey:sesskey},done:response=>{if("success"===response.status){input.value="";const event=new CustomEvent("mod_moodlechatbot:messagesent",{detail:response.message,bubbles:!0});form.dispatchEvent(event)}else _notification.default.alert("Error",response.message)},fail:_notification.default.exception}])};form.addEventListener("submit",(e=>{e.preventDefault(),sendMessage()})),submitButton.addEventListener("click",(e=>{e.preventDefault(),sendMessage()}))}}));

//# sourceMappingURL=chat_input.min.js.map