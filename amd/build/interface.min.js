define("mod_moodlechatbot/interface",["jquery","core/ajax","core/log"],(function($,ajax,log){function displayMessage(message,sender){const messageElement=$("<div>").addClass("message").addClass(sender);messageElement.text(message),$("#moodlechatbot-messages").append(messageElement),$("#moodlechatbot-messages").scrollTop($("#moodlechatbot-messages")[0].scrollHeight)}return log.debug("Moodle chatbot interface module loaded"),{init:function(){log.debug("Moodle chatbot interface initialized"),$(document).ready((function(){$("#moodlechatbot-send").click((function(){const userMessage=$("#moodlechatbot-textarea").val();var message;""!==userMessage.trim()&&(log.debug("User sent message: "+userMessage),displayMessage(userMessage,"user"),message=userMessage,log.debug("Sending message to Ollama: "+message),ajax.call({url:"http://192.168.0.102:11434/api/chat",type:"POST",data:JSON.stringify({model:"PHI3.5",messages:[{role:"user",content:message}],stream:!1}),success:function(response){log.debug("Received response from Ollama:",response),displayMessage(response.message&&response.message.content?response.message.content:"No response received from the assistant.","bot")},error:function(xhr,status,error){log.error("Error in Ollama API call:",error),displayMessage("An error occurred: "+error,"bot")}}),$("#moodlechatbot-textarea").val(""))})),$("#moodlechatbot-textarea").keypress((function(e){if(13===e.which&&!e.shiftKey)return $("#moodlechatbot-send").click(),!1}))}))}}}));

//# sourceMappingURL=interface.min.js.map